<link rel="stylesheet" href="demo.css">
<script type="module" src="pf-select.js"></script>

<section>
  <h2>Typeahead example</h2>
  <p>
    Any arrow keys work.
    Only one option can be selected.
    Filter by typing into the input.
  </p>
  <label>
    Pick a color:
    <pf-select typeahead>
      <pf-select-option value="Blue">Blue</pf-select-option>
      <pf-select-option value="Green">Green</pf-select-option>
      <pf-select-option value="Magenta">Magenta</pf-select-option>
      <pf-select-option value="Orange">Orange</pf-select-option>
      <pf-select-option value="Purple">Purple</pf-select-option>
      <pf-select-option value="Pink">Pink</pf-select-option>
      <pf-select-option value="Red">Red</pf-select-option>
      <pf-select-option value="Yellow">Yellow</pf-select-option>
    </pf-select>
  </label>
</section>

<section>
  <h2>Typeahead example with chips</h2>
  <p>
    Any arrow keys work.
    Only one option can be selected.
    Filter by typing into the input.
  </p>
  <label>
    Pick a color:
    <pf-select typeahead multi-selectable>
      <pf-select-option value="Blue">Blue</pf-select-option>
      <pf-select-option value="Green">Green</pf-select-option>
      <pf-select-option value="Magenta">Magenta</pf-select-option>
      <pf-select-option value="Orange">Orange</pf-select-option>
      <pf-select-option value="Purple">Purple</pf-select-option>
      <pf-select-option value="Pink">Pink</pf-select-option>
      <pf-select-option value="Red">Red</pf-select-option>
      <pf-select-option value="Yellow">Yellow</pf-select-option>
    </pf-select>
  </label>
</section>
<section>
  <h2>Typeahead example with create option</h2>
  <label>
    Pick a color:
    <pf-select id="pfselect" typeahead>
      <pf-select-option value="Blue">Blue</pf-select-option>
      <pf-select-option value="Green">Green</pf-select-option>
      <pf-select-option value="Magenta">Magenta</pf-select-option>
      <pf-select-option value="Orange">Orange</pf-select-option>
      <pf-select-option value="Purple">Purple</pf-select-option>
      <pf-select-option value="Pink">Pink</pf-select-option>
      <pf-select-option value="Red">Red</pf-select-option>
      <pf-select-option value="Yellow">Yellow</pf-select-option>
    </pf-select>
  </label>
  <script>
    const pfselect = document.getElementById('pfselect');
    let option;
    const addCreateOption = () => {
      option = document.createElement('pf-select-option');
      updateOption();
      option.onclick = () => {
        option.innerHTML = option.value;
        pfselect.filter = '';
        addCreateOption();
      };
      pfselect.appendChild(option);
    };
    const updateOption = () => {
      if (option) {
        let filter = pfselect.filter || '';
        if (filter === '*') {
          filter = '';
        }
        console.log(filter);
        option.value = filter;
        option.hidden = option.disabled = filter === '';
        option.innerHTML = `Create option: "${filter}"`;
      }
    }
    addCreateOption();
    pfselect.addEventListener('typeaheadinput', updateOption);
  </script>
</section>